[Resolve]
# Do not specify a static DNS here. This allows systemd-resolved to use
# the DNS server(s) provided by the network's DHCP server (your gateway).
# This allows for split DNS on your local network
# DNS=

# List your preferred external DNS servers as fallbacks.
# These will be used if the DHCP-provided DNS server is unavailable.
FallbackDNS=1.1.1.1#cloudflare-dns.com 8.8.8.8#dns.google 1.0.0.1#cloudflare-dns.com 8.8.4.4#dns.google 2606:4700:4700::1111#cloudflare-dns.com 2001:4860:4860::8888#dns.google 2606:4700:4700::1001#cloudflare-dns.com 2001:4860:4860::8844#dns.google


# Alternatively, you can use the following line to specify DNS servers with DoT:
# An entry for traditional DNS allows for bootstrapping the DNS resolution
#DNS=1.1.1.1#cloudflare-dns.com 8.8.8.8#dns.google 1.0.0.1#cloudflare-dns.com 8.8.4.4#dns.google 2606:4700:4700::1111#cloudflare-dns.com 2001:4860:4860::8888#dns.google 2606:4700:4700::1001#cloudflare-dns.com 2001:4860:4860::8844#dns.google
# Fallback DNS servers (if needed, these will also be attempted with DoT if opportunistic)
# If you want to ensure *some* DNS resolution even if the primary ones fail with DoT,
# you can list them here. They will also attempt DoT in opportunistic mode.
#FallbackDNS=9.9.9.9#dns.quad9.net 149.112.112.112#dns.quad9.net


# Enable opportunistic DNS-over-TLS for the fallback servers that support it.
DNSOverTLS=opportunistic

# This setting is a good balance for security and compatibility.
DNSSEC=allow-downgrade

# Apply these settings for all domains.
Domains=~.